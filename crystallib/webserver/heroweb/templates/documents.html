<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document Sharing Platform</title>
    <link rel="stylesheet" href="/static/css/documents.css">
    <link rel="stylesheet" href="/static/css/pico_classless.css" />
    <link rel="stylesheet" href="https://unpkg.com/@@picocss/pico@1.*/css/pico.min.css">
    <style>
        .file-row {
            margin-bottom: 2rem;
        }
        .file-list {
            list-style: none;
            padding: 0;
        }
        .file-item {
            padding: 0.5rem;
            border-bottom: 1px solid #ddd;
        }
        .file-item a {
            text-decoration: none;
        }
    </style>
</head>
<body>

    <header>
        <h1>Document Sharing Platform</h1>
        <p>Find and share your favorite documents, slides, wikis, and books!</p>
    </header>

    <main>
        <section class="file-row" id="pdfs">
            <h2>PDFs</h2>
            <ul class="file-list" id="pdf-list">
            </ul>
        </section>

        <section class="file-row" id="slides">
            <h2>Slides</h2>
            <ul class="file-list" id="slide-list"></ul>
        </section>

        <section class="file-row" id="wikis">
            <h2>Wikis</h2>
            <ul class="file-list" id="wiki-list"></ul>
        </section>

        <section class="file-row" id="books">
            <h2>Books</h2>
            <ul class="file-list" id="book-list"></ul>
        </section>
    </main>
    @js '/static/js/documents.js'

    <footer>
        <p>&copy; 2024 Document Sharing Platform</p>
    </footer>

    <script>
        async function fetchFiles(endpoint, listId) {
            try {
                const response = await fetch(endpoint);
                const data = await response.json();

                const list = document.getElementById(listId);
                data.forEach(item => {
                    const listItem = document.createElement('li');
                    listItem.classList.add('file-item');
                    listItem.innerHTML = '<a href="' + item.url + '" target="_blank"><img src="thumbnail2.jpg" alt="Thumbnail"><h3>' + item.title + '</h3><p>' + item.description + '</p></a>';
                    list.appendChild(listItem);
                });
            } catch (error) {
                console.error('Error fetching files:', error);
            }
        }

        // Fetch and display files from each endpoint
        fetchFiles('/documents/pdfs', 'pdf-list');
        fetchFiles('/documents/slides', 'slide-list');
        fetchFiles('/documents/wikis', 'wiki-list');
        fetchFiles('/documents/books', 'book-list');
    </script>

</body>
</html>